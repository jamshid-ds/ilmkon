# ğŸ“„ Project Documentation

## ğŸ“¦ Project Structure
```
your_bot_project/
â”œâ”€â”€ main.py                   # Entry point
â”œâ”€â”€ app.py                    # Startup, shutdown, and polling logic
â”œâ”€â”€ config.py                 # Environment variable loader
â”‚
â”œâ”€â”€ database/
â”‚   â””â”€â”€ db.py                 # PostgreSQL connection and user queries
â”‚
â”œâ”€â”€ handlers/
â”‚   â”œâ”€â”€ registration.py       # Registration FSM
â”‚   â”œâ”€â”€ login.py              # Login FSM
â”‚   â”œâ”€â”€ voice.py              # STT â†’ RAG â†’ TTS handler
â”‚   â””â”€â”€ common.py             # /start and /help commands
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ stt.py                # Whisper STT
â”‚   â”œâ”€â”€ rag.py                # Gemini + FAISS retrieval model
â”‚   â””â”€â”€ tts.py                # edge-tts (Text to Speech)
â”‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ misc.py               # Hashing, ID, safe delete
â”‚   â””â”€â”€ keyboards.py          # Inline keyboard builders
â”‚
â”œâ”€â”€ data/                     # Source documents for RAG
â”œâ”€â”€ faiss_index/              # FAISS vector store cache
â””â”€â”€ .env                      # API keys and DB credentials
```

---

## âš™ï¸ Environment Variables (.env)
```
BOT_TOKEN=Your_Telegram_Bot_Token
GEMINI_API_KEY=Your_Gemini_API_Key
DB_HOST=localhost
DB_PORT=5432
DB_NAME=yourdbname
DB_USER=youruser
DB_PASSWORD=yourpassword
```

---

## ğŸ§  Functionality
- **Registration/Login**: 
  - Foydalanuvchi username, parol, ism, yosh kabi ma'lumotlarni kiritadi.
  - FSM orqali ketma-ket ma'lumotlar olinadi va `PostgreSQL` bazaga yoziladi.

- **Voice Q&A (RAG)**:
  - Telegram'dan ovozli xabar olinadi
  - STT: `Whisper` modeli orqali matnga aylantiriladi
  - RAG: `FAISS + Gemini` yordamida tegishli hujjatlardan javob topiladi
  - TTS: `edge-tts` orqali javob ovozga aylantirilib, foydalanuvchiga qaytariladi

---

## ğŸš€ How to Run
```bash
pip install -r requirements.txt
python main.py
```

---

## ğŸ“Œ Developer Tips
- Har bir modul mustaqil testlanadigan qilib yozilgan
- Xatoliklar `logging` orqali kuzatib boriladi
- `handlers/` ichidagi fayllar FSM'lar bilan ishlaydi
- `services/` esa `model` larni yuklab va ishlatib beradi
- `.env` fayl boâ€˜lmasa, `config.py` xatolik chiqaradi

---

## ğŸ§© Extending in Future
- `RAG` logikasini OpenAI yoki boshqa LLM bilan almashtirish oson
- TTS uchun `gTTS`, `Bark`, yoki `VITS` integratsiya qilinishi mumkin
- `handlers/` ga profil tahrirlash, parol oâ€˜zgartirish, va boshqalar qoâ€˜shish mumkin

---

Loyiha modular tuzilgan â€” har bir boâ€˜limda kerakli faqat oâ€˜sha logika saqlanadi.
Boshqa dasturchilar ham tezda tushunib, qoâ€˜shila olishadi âœ…